this.PerceptionToolkit=this.PerceptionToolkit||{},this.PerceptionToolkit.Bootstrap=function(t){"use strict";function e(t){return 1-Math.pow(1-t,3)}const n=new WeakMap;function i(t,{from:i=1,to:o=0,duration:s=250,ease:r=e}={}){return new Promise(e=>{const a=n.get(t);a&&(cancelAnimationFrame(a.id),n.delete(t),a.resolve()),t.style.opacity=i.toString();const d=self.performance.now(),c=()=>{const a=function(t,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){return Math.max(e,Math.min(n,t))}((self.performance.now()-d)/s,0,1),l=i+(o-i)*r(a);t.style.opacity=l.toString(),a<1?n.set(t,{id:requestAnimationFrame(c),resolve:e}):(t.style.opacity=o.toString(),n.delete(t),e())};n.set(t,{id:requestAnimationFrame(c),resolve:e})})}const o="\n:host {\n  --baseline: 16px;\n  --background: #FFF;\n  --borderRadius: 5px;\n  --color: #333;\n  --fontFamily: 'Arial', 'Helvetica', sans-serif;\n  --padding: calc(var(--baseline) * 2)\n      calc(var(--baseline) * 2)\n      calc(var(--baseline) * 1)\n      calc(var(--baseline) * 2);\n\n  position: relative;\n  display: inline-block;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-radius: var(--borderRadius);\n  font-family: var(--fontFamily);\n  background: var(--background);\n  color: var(--color);\n}\n\n#container {\n  white-space: nowrap;\n}\n\n#container.padded {\n  padding: var(--padding);\n}\n\n#close {\n  width: 24px;\n  height: 24px;\n  background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4=);\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  font-size: 0;\n  border: none;\n  cursor: pointer;\n  opacity: 0.7;\n  transition: opacity 0.3s cubic-bezier(0, 0, 0.3, 1);\n}\n\n#close:hover {\n  opacity: 1;\n}\n\nslot::slotted(*) {\n  flex: 1;\n  border-right: 1px solid #CCC;\n}\n\nslot::slotted(*:last-child) {\n  border-right: none;\n}\n\nslot {\n  display: flex;\n  border-top: 1px solid #AAA;\n}\n\n:host(:empty) slot {\n  border: none;\n}\n\n#title {\n  padding: var(--baseline);\n  font-size: 14px;\n  font-weight: 400;\n  margin: 0;\n}\n\n#description {\n  padding: var(--baseline);\n  font-size: 16px;\n  font-weight: 400;\n  min-height: calc(var(--baseline) * 2);\n  margin: 0;\n}\n\n#image {\n  background-color: #111;\n  background-size: cover;\n  background-position: center center;\n  min-width: 300px;\n  min-height: 210px;\n  transition: background-image 1s ease-out;\n}\n",s='\n  <button id="close">Close</button>\n  <div id="container"></div>\n  <div id="slotted-content"><slot></slot></div>\n';class r extends HTMLElement{constructor(){super(),this.fadeDuration=200,this.sandboxAttribute="allow-same-origin",this.srcInternal="",this.root=this.attachShadow({mode:"open"}),this.onClickBound=this.onClick.bind(this)}get src(){return this.srcInternal}set src(t){this.srcInternal=t,this.render()}get width(){return this.widthInternal}set width(t){this.widthInternal=t,this.setDimensions()}get height(){return this.heightInternal}set height(t){this.heightInternal=t,this.setDimensions()}connectedCallback(){this.root.innerHTML=`<style>${o}</style> ${s}`,this.render(),this.setDimensions(),this.addEventListener("click",this.onClickBound)}disconnectedCallback(){this.removeEventListener("click",this.onClickBound)}async close(t=this.fadeDuration){0!==t?(await i(this,{duration:t}),this.remove()):this.remove()}async onClick(t){"close"===(t.path?t.path[0]:t.composedPath()[0]).id&&await this.close()}render(){const t=this.root.querySelector("#container");if(t)if(t.classList.remove("padded"),this.srcIsString(this.src))t.textContent=this.src,t.classList.add("padded");else if(this.srcIsCardData(this.src))this.renderCardData(this.src);else if(this.srcIsUrl(this.src)){const e=document.createElement("iframe");e.src=this.src.toString(),e.setAttribute("sandbox",this.sandboxAttribute),e.style.border="none",e.id="external-content",e.width=(this.width||0).toString(),e.height=(this.height||0).toString(),t.appendChild(e)}else console.warn("Unexpected card content",this.src),t.textContent="Unexpected content",t.classList.add("padded")}renderCardData(t){const e=this.root.querySelector("#container");if(e){if(e.innerHTML="",t.name){const n=document.createElement("h1");n.setAttribute("id","title"),n.textContent=t.name,e.appendChild(n)}if(t.image){const n=document.createElement("div");n.setAttribute("id","image"),n.style.backgroundImage=`url(${t.image})`,e.appendChild(n)}if(t.description){const n=document.createElement("div");n.setAttribute("id","description"),n.textContent=t.description,e.appendChild(n)}}}srcIsString(t){return"string"==typeof t}srcIsCardData(t){return"object"==typeof t&&void 0===t.href}srcIsUrl(t){return"object"==typeof t&&void 0!==t.href}setDimensions(){const t=this.root.querySelector("#container");t&&(this.widthInternal&&(t.style.width=`${this.widthInternal}px`),this.heightInternal&&(t.style.height=`${this.heightInternal}px`))}}function a(t,e,n){const i=new CustomEvent(t,{bubbles:!0,detail:n});return e.dispatchEvent(i),i}function d(t){return new Promise((e,n)=>{const i=document.createElement("script");i.src=t,i.onload=e,i.onerror=n,document.head.appendChild(i)})}var c;r.defaultTagName="data-card",function(t){t[t.VERBOSE=4]="VERBOSE",t[t.INFO=3]="INFO",t[t.WARNING=2]="WARNING",t[t.ERROR=1]="ERROR",t[t.NONE=0]="NONE"}(c||(c={}));class l{constructor(){this.useEvents=!1,this.detectors=new Map}addDetector(t){const{name:e,supported:n}=t;if(this.detectors.has(e))throw new Error(`${e} already added`);this.detectors.set(e,n)}removeDetector(t){this.detectors.delete(t)}async detect(){const t={};for(const[e,n]of this.detectors)t[e]=await n();return this.useEvents&&a(l.supportsEvent,self,t),t}}l.supportsEvent="supports";const h={name:"getUserMedia",supported:async()=>"mediaDevices"in self.navigator&&"getUserMedia"in self.navigator.mediaDevices},p={name:"wasm",supported:async()=>"WebAssembly"in self},u="devicenotsupported";window.PerceptionToolkit.config=window.PerceptionToolkit.config||{};const m=new Promise(async t=>{const{config:e}=window.PerceptionToolkit,{root:n="",showLoaderDuringBoot:i=!0}=e,o=new l;o.addDetector(h),o.addDetector(p);const s=await o.detect();if(s[h.name]&&s[p.name]){if(await d(`${n}/lib/bundled/perception-toolkit/loader.min.js`),i){const{showLoader:t}=window.PerceptionToolkit.Loader;t()}e.onboarding&&e.onboardingImages&&await d(`${n}/lib/bundled/perception-toolkit/onboarding.min.js`),t(!0)}else t(!1)});let g;async function w(){if(!await m){const{hideLoader:t}=window.PerceptionToolkit.Loader;return t(),void(a(u,window).defaultPrevented||b({cls:"no-support",msg:"Sorry, this browser does not support the required features"}))}const{showLoader:t,hideLoader:e}=window.PerceptionToolkit.Loader,{config:n}=window.PerceptionToolkit,{root:i="",sitemapUrl:o,detectionMode:s}=n;if(n&&n.onboardingImages&&n.onboarding){e();const{startOnboardingProcess:t}=window.PerceptionToolkit.Onboarding;await t(n.onboardingImages)}t(),g||(g=await d(`${i}/lib/bundled/perception-toolkit/main.min.js`));const{initialize:r}=window.PerceptionToolkit.Main;r({detectionMode:s,sitemapUrl:o})}function b({msg:t="",cls:e=""}){customElements.get(r.defaultTagName)||customElements.define(r.defaultTagName,r);const{config:n}=window.PerceptionToolkit,{cardContainer:i=document.body}=n;if(i.querySelector(r.defaultTagName))return;const o=new r;o.classList.add(e),o.src=t,i.appendChild(o)}return async function(){const t=await m,{hideLoader:e,showLoader:n}=window.PerceptionToolkit.Loader,{config:i}=window.PerceptionToolkit,{buttonVisibilityClass:o="visible"}=i,s=i.button?i.button:i.buttonSelector?document.body.querySelector(i.buttonSelector):null;e(),s&&(s.classList.toggle(o,t),s.addEventListener("click",e=>{t?(n(),s.classList.remove(o),w()):b({cls:"no-support",msg:"Sorry, this browser does not support the required features"})}),window.addEventListener("captureclose",()=>{s.classList.add(o)}))}(),t.initializeExperience=w,t}({});