this.PerceptionToolkit=this.PerceptionToolkit||{},this.PerceptionToolkit.barcodeDetection=function(o){"use strict";function e(o){return new Promise((e,i)=>{const t=document.createElement("script");t.src=o,t.onload=e,t.onerror=i,document.head.appendChild(t)})}const i=new Promise(async o=>{const{config:i}=window.PerceptionToolkit,{root:t=""}=i;await e(`${t}/lib/bundled/barcode-detection/loader.min.js`);const{showLoader:n}=window.PerceptionToolkit.loader;n(),await Promise.all([e(`${t}/lib/bundled/barcode-detection/device-support.min.js`),e(`${t}/lib/bundled/barcode-detection/onboarding.min.js`),e(`${t}/third_party/idb-keyval/idb-keyval-iife.min.js`)]);const{detectSupport:d}=window.PerceptionToolkit.deviceSupport;o(await d())});let t;async function n(){if(!await i)return;const{startOnboardingProcess:o}=window.PerceptionToolkit.onboarding,{idbKeyval:n}=window,{hideLoader:d}=window.PerceptionToolkit.loader,{config:r}=window.PerceptionToolkit;d(),!await n.get("onboarded")&&r&&r.onboardingImages&&(await o(r.onboardingImages),await n.set("onboarded",!0)),t||(t=await e("/lib/bundled/barcode-detection/main.min.js"));const{initialize:a}=window.PerceptionToolkit.main;a()}return async function(){if(!await i)return;const{hideLoader:o,showLoader:e}=window.PerceptionToolkit.loader,{config:t}=window.PerceptionToolkit,d=t.button?t.button:t.buttonSelector?document.body.querySelector(t.buttonSelector):null;o(),d&&(d.classList.add("visible"),d.addEventListener("click",o=>{e(),d.classList.remove("visible"),n()}),window.addEventListener("captureclose",()=>{d.classList.add("visible")}))}(),o.initializeExperience=n,o}({});