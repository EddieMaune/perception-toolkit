this.PerceptionToolkit=this.PerceptionToolkit||{},this.PerceptionToolkit.barcodeDetection=function(e){"use strict";function t(e){return 1-Math.pow(1-e,3)}const n=new WeakMap;function i(e,{from:i=1,to:o=0,duration:s=250,ease:r=t}={}){return new Promise(t=>{const a=n.get(e);a&&(cancelAnimationFrame(a.id),n.delete(e),a.resolve()),e.style.opacity=i.toString();const d=self.performance.now(),c=()=>{const a=function(e,t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){return Math.max(t,Math.min(n,e))}((self.performance.now()-d)/s,0,1),l=i+(o-i)*r(a);e.style.opacity=l.toString(),a<1?n.set(e,{id:requestAnimationFrame(c),resolve:t}):(e.style.opacity=o.toString(),n.delete(e),t())};n.set(e,{id:requestAnimationFrame(c),resolve:t})})}const o="\n:host {\n  --baseline: 16px;\n  --background: #FFF;\n  --borderRadius: 5px;\n  --color: #333;\n  --fontFamily: 'Arial', 'Helvetica', sans-serif;\n  --padding: calc(var(--baseline) * 2)\n      calc(var(--baseline) * 2)\n      calc(var(--baseline) * 1)\n      calc(var(--baseline) * 2);\n\n  position: relative;\n  display: inline-block;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-radius: var(--borderRadius);\n  font-family: var(--fontFamily);\n  background: var(--background);\n  color: var(--color);\n}\n\n#container {\n  white-space: nowrap;\n}\n\n#container.padded {\n  padding: var(--padding);\n}\n\n#close {\n  width: 24px;\n  height: 24px;\n  background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4=);\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  font-size: 0;\n  border: none;\n  cursor: pointer;\n  opacity: 0.7;\n  transition: opacity 0.3s cubic-bezier(0, 0, 0.3, 1);\n}\n\n#close:hover {\n  opacity: 1;\n}\n\nslot::slotted(*) {\n  flex: 1;\n  border-right: 1px solid #CCC;\n}\n\nslot::slotted(*:last-child) {\n  border-right: none;\n}\n\nslot {\n  display: flex;\n  border-top: 1px solid #AAA;\n}\n\n:host(:empty) slot {\n  border: none;\n}\n\n#title {\n  padding: var(--baseline);\n  font-size: 14px;\n  font-weight: 400;\n  margin: 0;\n}\n\n#description {\n  padding: var(--baseline);\n  font-size: 16px;\n  font-weight: 400;\n  min-height: calc(var(--baseline) * 2);\n  margin: 0;\n}\n\n#image {\n  background-color: #111;\n  background-size: cover;\n  background-position: center center;\n  min-width: 300px;\n  min-height: 210px;\n  transition: background-image 1s ease-out;\n}\n",s='\n  <button id="close">Close</button>\n  <div id="container"></div>\n  <div id="slotted-content"><slot></slot></div>\n';class r extends HTMLElement{constructor(){super(),this.fadeDuration=200,this.sandboxAttribute="allow-same-origin",this.srcInternal="",this.root=this.attachShadow({mode:"open"}),this.onClickBound=this.onClick.bind(this)}get src(){return this.srcInternal}set src(e){this.srcInternal=e,this.render()}get width(){return this.widthInternal}set width(e){this.widthInternal=e,this.setDimensions()}get height(){return this.heightInternal}set height(e){this.heightInternal=e,this.setDimensions()}connectedCallback(){this.root.innerHTML=`<style>${o}</style> ${s}`,this.render(),this.setDimensions(),this.addEventListener("click",this.onClickBound)}disconnectedCallback(){this.removeEventListener("click",this.onClickBound)}async close(e=this.fadeDuration){0!==e?(await i(this,{duration:e}),this.remove()):this.remove()}async onClick(e){"close"===(e.path?e.path[0]:e.composedPath()[0]).id&&await this.close()}render(){const e=this.root.querySelector("#container");if(e)if(e.classList.remove("padded"),this.srcIsString(this.src))e.textContent=this.src,e.classList.add("padded");else if(this.srcIsCardData(this.src))this.renderCardData(this.src);else if(this.srcIsUrl(this.src)){const t=document.createElement("iframe");t.src=this.src.toString(),t.setAttribute("sandbox",this.sandboxAttribute),t.style.border="none",t.id="external-content",t.width=(this.width||0).toString(),t.height=(this.height||0).toString(),e.appendChild(t)}else console.warn("Unexpected card content",this.src),e.textContent="Unexpected content",e.classList.add("padded")}renderCardData(e){const t=this.root.querySelector("#container");if(t){if(t.innerHTML="",e.name){const n=document.createElement("h1");n.setAttribute("id","title"),n.textContent=e.name,t.appendChild(n)}if(e.image){const n=document.createElement("div");n.setAttribute("id","image"),n.style.backgroundImage=`url(${e.image})`,t.appendChild(n)}if(e.description){const n=document.createElement("div");n.setAttribute("id","description"),n.textContent=e.description,t.appendChild(n)}}}srcIsString(e){return"string"==typeof e}srcIsCardData(e){return"object"==typeof e&&void 0===e.href}srcIsUrl(e){return"object"==typeof e&&void 0!==e.href}setDimensions(){const e=this.root.querySelector("#container");e&&(this.widthInternal&&(e.style.width=`${this.widthInternal}px`),this.heightInternal&&(e.style.height=`${this.heightInternal}px`))}}function a(e){return new Promise((t,n)=>{const i=document.createElement("script");i.src=e,i.onload=t,i.onerror=n,document.head.appendChild(i)})}var d;r.defaultTagName="data-card",function(e){e[e.VERBOSE=4]="VERBOSE",e[e.INFO=3]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=1]="ERROR",e[e.NONE=0]="NONE"}(d||(d={}));class c{constructor(){this.useEvents=!1,this.detectors=new Map}addDetector(e){const{name:t,supported:n}=e;if(this.detectors.has(t))throw new Error(`${t} already added`);this.detectors.set(t,n)}removeDetector(e){this.detectors.delete(e)}async detect(){const e={};for(const[t,n]of this.detectors)e[t]=await n();return this.useEvents&&function(e,t,n){const i=new CustomEvent(e,{bubbles:!0,detail:n});t.dispatchEvent(i)}(c.supportsEvent,self,e),e}}c.supportsEvent="supports";const l={name:"getUserMedia",supported:async()=>"mediaDevices"in self.navigator&&"getUserMedia"in self.navigator.mediaDevices},h={name:"wasm",supported:async()=>"WebAssembly"in self},u=new Promise(async e=>{const{config:t}=window.PerceptionToolkit,{root:n="",showLoaderDuringBoot:i=!0}=t,o=new c;o.addDetector(l),o.addDetector(h);const s=await o.detect();if(s[l.name]&&s[h.name]){if(await a(`${n}/lib/bundled/barcode-detection/loader.min.js`),i){const{showLoader:e}=window.PerceptionToolkit.loader;e()}if(t.onboarding&&t.onboardingImages){await a(`${n}/third_party/idb-keyval/idb-keyval-iife.min.js`);const{idbKeyval:e}=window;await e.get("onboarded")||await a(`${n}/lib/bundled/barcode-detection/onboarding.min.js`)}e(!0)}else e(!1)});let p;async function m(){if(!await u)return;const{idbKeyval:e}=window,{showLoader:t,hideLoader:n}=window.PerceptionToolkit.loader,{config:i}=window.PerceptionToolkit,{root:o="",sitemapUrl:s,detectionMode:r}=i;if(i&&i.onboardingImages&&i.onboarding){if(!await e.get("onboarded")){n();const{startOnboardingProcess:t}=window.PerceptionToolkit.onboarding;await t(i.onboardingImages),await e.set("onboarded",!0)}}t(),p||(p=await a(`${o}/lib/bundled/barcode-detection/main.min.js`));const{initialize:d}=window.PerceptionToolkit.main;d({detectionMode:r,sitemapUrl:s})}return async function(){const e=await u,{hideLoader:t,showLoader:n}=window.PerceptionToolkit.loader,{config:i}=window.PerceptionToolkit,{buttonVisibilityClass:o="visible"}=i,s=i.button?i.button:i.buttonSelector?document.body.querySelector(i.buttonSelector):null;t(),s&&(s.classList.toggle(o,e),s.addEventListener("click",t=>{if(!e){customElements.get(r.defaultTagName)||customElements.define(r.defaultTagName,r);const e=new r;return e.classList.add("no-support"),e.src="Sorry, this browser does not support the required features",void document.body.appendChild(e)}n(),s.classList.remove(o),m()}),window.addEventListener("captureclose",()=>{s.classList.add(o)}))}(),e.initializeExperience=m,e}({});